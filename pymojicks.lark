start: stmts+

stmts: stmt ";"
     | var
     | function

stmt: stmt "ðŸ”" types -> convert_stmt
    | builtin
    | id paren_expr -> function_call

var: "âœ" id "ðŸ‘‰" expr ";"
   | "âœ" id "ðŸ‘‰" stmt ";"

builtin: "ðŸ“¤" paren_expr -> print
       | "ðŸ“¥" paren_expr -> input
       | "ðŸ”š" "()" -> exit

paren_expr: "(" expr ("," expr)* ")"
          | "()"

expr: NUMBER -> float
    | string
    | bool -> bool
    | id -> variable

bool: "âœ”" -> true
    | "âŒ" -> false

?sum: product
    | sum "+" product   -> add
    | sum "-" product   -> sub

?product: atom
        | product "*" atom  -> mul
        | product "/" atom  -> div

?atom: NUMBER           -> number
     | "-" atom         -> neg
     | NAME             -> var
     | "(" sum ")"

function: "âœï¸" id "(" func_args? ")" func_body

func_args: func_arg ("," func_arg)*

func_arg: types id

func_body: "â–¶ï¸" stmts+ "â—€ï¸"

string: STRING
id: /[a-zA-Z_][a-zA-Z0-9_]*/ -> identifier

types: "â›”" -> bool_type
     | "ðŸ”¢" -> float_type
     | "âœ’ï¸" -> string_type

COMMENT: /ðŸ‘µ.*?ðŸ‘´/
       | "ðŸ’¬" /.+/

%import common.LETTER
%import common.WS
%ignore WS
%ignore COMMENT
%import common.CNAME -> NAME
%import common.NUMBER
%import common.WS_INLINE
%import common.ESCAPED_STRING -> STRING
%ignore WS_INLINE
